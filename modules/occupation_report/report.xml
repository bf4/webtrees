<?xml version="1.0" encoding="UTF-8"?>
<Report>
<!-- $Id: report.xml 10021 2010-12-10 15:09:34Z lukasz $ -->
	<Title><var var="i18n::translate('Occupation Report')" /></Title>
	<Description>Prints a list of individuals occupation matching specific criteria</Description>
	<Input name="occupation" lookup="OCCU" type="text"><var var="translate_fact('OCCU')" /> </Input>
	<Input name="sortby" type="select" default="NAME" options="none=>i18n::translate('None')|NAME=>i18n::translate('Name')|BIRT:DATE=>translate_fact('BIRT:DATE')"><var var="i18n::translate('Sort by')" /></Input>
	<Input name="pageSize" type="select" default="A4" options="letter=>i18n::translate_c('paper size','Letter')|A3=>i18n::translate_c('paper size', 'A3')|A4=>i18n::translate_c('paper size','A4')|legal=>i18n::translate_c('paper size','Legal')"><var var="i18n::translate('Page size')" /></Input>
	<Input name="fonts" type="select" default="dejavusans" options="arialunicid0=>i18n::translate_c('font name', 'Arial')|dejavusans=>i18n::translate_c('font name', 'DejaVu')|helvetica=>i18n::translate_c('font name', 'Helvetica')"><var var="i18n::translate('Font')"/></Input>

	<!-- Header -->
	<Style name="header" font="$fonts" size="16" style="b" />
	<!-- Page numbers text -->
	<Style name="pagenum" font="$fonts" size="8"/>
	<!-- Standard text -->
	<Style name="text" font="$fonts" size="8"/>
	<!-- Column labels -->
	<Style name="label" font="$fonts" size="10" style="b" />
	<!-- Generated by style - required style name by the generator -->
	<Style name="genby" font="$fonts" size="8" />
	<!-- Date text -->
	<Style name="date" font="$fonts" size="8"/>

	<!-- landscape orientation -->
	<SetVar name="namewidth" value="180"/>
	<SetVar name="datewidth" value="95"/>
	<SetVar name="occuwidth" value="130"/>
	<SetVar name="occudatewidth" value="95"/>
	<SetVar name="placewidth" value="100"/>
	<SetVar name="printedoccupation" value="0" />
	<SetVar name="morespaceindi" value="$namewidth + $datewidth" />

	<Doc pageSize="$pageSize" orientation="landscape">
		<Header>
			<Cell align="center" height="20" newline="1" style="header"><var var="i18n::translate('Occupation Report')" /></Cell>
			<Cell align="rightrtl" newline="1" style="pagenum"><var var="i18n::translate('Page')" /> <PageNum /> <var var="i18n::translate('of')" /> <TotalPages /></Cell>

			<SetVar name="fill" value="" />
			<if condition="$sortby=='NAME'"><SetVar name="fill" value="#AAAAAA" /></if>
			<TextBox bgcolor="$fill" border="1" width="$namewidth">
				<Text style="label"><var var="i18n::translate('Name')" /></Text>
			</TextBox>

			<SetVar name="fill" value="" />
			<if condition="$sortby=='BIRT:DATE'"><SetVar name="fill" value="#AAAAAA" /></if>
			<TextBox bgcolor="$fill" border="1" width="$datewidth">
				<Text style="label"><var var="translate_fact('BIRT:DATE')" /></Text>
			</TextBox>
			<!-- should print and sort by birth date -->

			<TextBox border="1" width="$occuwidth">
				<Text style="label"><var var="translate_fact('OCCU')" /></Text>
			</TextBox>
			<TextBox border="1" width="$occudatewidth">
				<Text style="label"><var var="translate_fact('DATE')" /></Text>
			</TextBox>
			<TextBox border="1" width="$placewidth">
				<Text style="label"><var var="translate_fact('PLAC')" /></Text>
			</TextBox>

			<TextBox border="1" newline="1">
				<Text style="label"><var var="translate_fact('NOTE')" /></Text>
			</TextBox>
		</Header>
		<Body>
			<List list="individual" filter1="OCCU CONTAINS $occupation" sortby="$sortby">
				<SetVar name="moreoccupation" value="0" />
				<!-- Printed List counter -->
				<SetVar name="printedoccupation" value="$printedoccupation + 1" />
				<Cell style="text" width="$namewidth"><GetPersonName id="" />
				</Cell>
				<Cell style="text" width="$datewidth"><GedcomValue tag="BIRT:DATE" newline="1" /></Cell>
				<RepeatTag tag="OCCU">
					<!-- Intend the fact line if more then one occupation -->
					<if condition="$moreoccupation==1">
						<Cell style="text" width="$morespaceindi"> </Cell>
					</if>
					<Cell style="text" width="$occuwidth"><GedcomValue tag="OCCU"/></Cell>
					<!-- Date of the fact -->
					<Cell style="text" width="$occudatewidth"><GedcomValue tag="OCCU:DATE"/></Cell>
					<!-- Place of the fact -->
					<Cell style="text" width="$placewidth"><GedcomValue tag="OCCU:PLAC"/></Cell>
					<!-- Note text -->
					<Cell style="text" newline="1">
						<RepeatTag tag="OCCU">
							<GedcomValue tag="OCCU:NOTE"/>
							<if condition="OCCU:NOTE!=''">
								<br /><GedcomValue tag="OCCU:NOTE"/>
							</if>
						</RepeatTag>
					</Cell>
					<SetVar name="moreoccupation" value="1" />
				</RepeatTag>
			</List>
			<Cell align="rightrtl" newline="1" style="label"><br /><var var="i18n::translate('Total individuals')" />: <ListTotal /></Cell>
		</Body>
		<Footer>
			<Cell align="rightrtl" newline="1" style="date"><Now /></Cell>
		</Footer>
	</Doc>
</Report>